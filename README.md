# ğŸ™ï¸ Realtime Dialogue Bot

çµåˆ STTï¼ˆèªéŸ³è½‰æ–‡å­—ï¼‰ã€TTSï¼ˆæ–‡å­—è½‰èªéŸ³ï¼‰èˆ‡ LLMï¼ˆå¤§å‹èªè¨€æ¨¡å‹ï¼‰ï¼Œå¯¦ç¾å³æ™‚çš„èªéŸ³å°è©±æ©Ÿå™¨äººç³»çµ±ã€‚
![èŠå¤©ç•Œé¢å±•ç¤º](assets/chat_demo.png)

## âœ¨ ä¸»è¦åŠŸèƒ½

- ğŸ¤ **å³æ™‚èªéŸ³è­˜åˆ¥**ï¼šæ”¯æŒé«˜ç²¾åº¦çš„ä¸­æ–‡èªéŸ³è½‰æ–‡å­—
- ğŸ§  **æ™ºèƒ½å°è©±**ï¼šæ•´åˆå¤§å‹èªè¨€æ¨¡å‹ï¼Œæä¾›è‡ªç„¶æµæš¢çš„å°è©±é«”é©—
- ğŸ”Š **å¤šå¼•æ“èªéŸ³åˆæˆ**ï¼šæ”¯æ´ BreezyVoiceã€VibeVoiceã€IndexTTSã€Spark-TTS å››ç¨® TTS å¼•æ“
- ğŸ­ **èªè€…å…‹éš†**ï¼šæ”¯æ´è‡ªå®šç¾©èªè€…éŸ³æª”é€²è¡ŒèªéŸ³å…‹éš†
- ğŸ’» **ç¾ä»£åŒ– UI**ï¼šVue.js å‰ç«¯ï¼ŒéŸ¿æ‡‰å¼è¨­è¨ˆï¼Œæ”¯æ´æ¡Œé¢å’Œç§»å‹•ç«¯
- âš¡ **é«˜æ€§èƒ½å„ªåŒ–**ï¼šCUDA åŠ é€Ÿã€æ¨¡å‹ç·©å­˜ã€æ··åˆç²¾åº¦æ¨è«–

## ğŸ—ï¸ å°ˆæ¡ˆæ¶æ§‹

### æ•´é«”ç›®éŒ„çµæ§‹
```
realtime-dialogue-bot/
â”œâ”€â”€ README.md               # å°ˆæ¡ˆèªªæ˜æ–‡ä»¶
â”œâ”€â”€ assets/                 # éœæ…‹è³‡æºæª”æ¡ˆ
â”œâ”€â”€ backend/                # å¾Œç«¯æœå‹™
â”‚   â”œâ”€â”€ app/                # FastAPI æ‡‰ç”¨ç¨‹å¼
â”‚   â”‚   â”œâ”€â”€ main.py         # API ä¸»ç¨‹å¼
â”‚   â”‚   â”œâ”€â”€ config.py       # é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ stt.py          # èªéŸ³è½‰æ–‡å­—æœå‹™
â”‚   â”‚   â”œâ”€â”€ chat.py         # LLM èŠå¤©æœå‹™
â”‚   â”‚   â”œâ”€â”€ tts_breezy.py   # BreezyVoice TTS æœå‹™
â”‚   â”‚   â”œâ”€â”€ tts_vibe.py     # VibeVoice TTS æœå‹™
â”‚   â”‚   â”œâ”€â”€ tts_index.py    # IndexTTS æœå‹™
â”‚   â”‚   â””â”€â”€ tts_spark.py    # Spark-TTS æœå‹™
â”‚   â”œâ”€â”€ BreezyVoice/        # BreezyVoice æ¨¡å‹åŸå§‹ç¢¼
â”‚   â”œâ”€â”€ VibeVoice/          # VibeVoice æ¨¡å‹åŸå§‹ç¢¼
â”‚   â”œâ”€â”€ Spark-TTS/          # Spark-TTS æ¨¡å‹åŸå§‹ç¢¼
â”‚   â”œâ”€â”€ index-tts/          # IndexTTS æ¨¡å‹åŸå§‹ç¢¼
â”‚   â”œâ”€â”€ llm_tools/          # LLM å·¥å…·å’Œé…ç½®
â”‚   â”‚   â”œâ”€â”€ async_llm_chat.py
â”‚   â”‚   â”œâ”€â”€ embed_rerank_model.py
â”‚   â”‚   â”œâ”€â”€ llm_chat.py
â”‚   â”‚   â”œâ”€â”€ memory.py
â”‚   â”‚   â””â”€â”€ configs/        # LLM æ¨¡å‹é…ç½®
â”‚   â”œâ”€â”€ models/             # é è¨“ç·´æ¨¡å‹ç›®éŒ„
â”‚   â”‚   â”œâ”€â”€ models--Qwen--Qwen2.5-1.5B/
â”‚   â”‚   â”œâ”€â”€ models--MediaTek-Research--BreezyVoice-300M/
â”‚   â”‚   â”œâ”€â”€ models--mobiuslabsgmbh--faster-whisper-large-v3-turbo/
â”‚   â”‚   â”œâ”€â”€ IndexTTS-1.5/
â”‚   â”‚   â”œâ”€â”€ Spark-TTS-0.5B/
â”‚   â”‚   â””â”€â”€ VibeVoice/
â”‚   â”œâ”€â”€ voices/             # èªè€…éŸ³æª”ç›®éŒ„
â”‚   â”œâ”€â”€ outputs/            # ç”ŸæˆéŸ³é »è¼¸å‡ºç›®éŒ„
â”‚   â”œâ”€â”€ uploads/            # ä¸Šå‚³æª”æ¡ˆæš«å­˜ç›®éŒ„
â”‚   â”œâ”€â”€ config.yaml         # ä¸»è¦é…ç½®æª”æ¡ˆ
â”‚   â”œâ”€â”€ requirements.txt    # Python ä¾è³´å¥—ä»¶
â”‚   â”œâ”€â”€ Dockerfile          # å®¹å™¨åŒ–é…ç½®
â”‚   â””â”€â”€ docker-compose.yml  # å¤šå®¹å™¨ç·¨æ’
â”œâ”€â”€ frontend/               # å‰ç«¯æ‡‰ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.vue         # ä¸»æ‡‰ç”¨å…ƒä»¶
â”‚   â”‚   â”œâ”€â”€ components/     # Vue å…ƒä»¶
â”‚   â”‚   â”œâ”€â”€ composables/    # Vue çµ„åˆå¼å‡½æ•¸
â”‚   â”‚   â”œâ”€â”€ router/         # è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ services/       # API æœå‹™
â”‚   â”‚   â””â”€â”€ stores/         # ç‹€æ…‹ç®¡ç†
â”‚   â”œâ”€â”€ package.json        # Node.js ä¾è³´é…ç½®
â”‚   â”œâ”€â”€ vite.config.js      # Vite å»ºç½®é…ç½®
â”‚   â”œâ”€â”€ docker-compose.yml  # å‰ç«¯å®¹å™¨é…ç½®
â”‚   â””â”€â”€ start-frontend*.sh  # å‰ç«¯å•Ÿå‹•è…³æœ¬
â””â”€â”€ repo_ref/               # åƒè€ƒè³‡æ–™å’Œæ–‡æª”
```

## ğŸš€ å¿«é€Ÿé–‹å§‹

### ç’°å¢ƒè¦æ±‚
- Python 3.8+
- Node.js 16+
- CUDA 11.8+ (æ¨è–¦ä½¿ç”¨ GPU)
- Docker & Podman (å®¹å™¨åŒ–éƒ¨ç½²)

### 1. Clone å°ˆæ¡ˆ
```bash
git clone https://github.com/fbpaul/realtime-dialogue-bot.git
cd realtime-dialogue-bot
```

### 2. å¾Œç«¯è¨­ç½®
- åƒç…§å¾Œç«¯çš„ [README.md](backend/README.md)

### 3. å‰ç«¯è¨­ç½®
- åƒç…§å‰ç«¯çš„ [README.md](frontend/README.md)

## ğŸ“Š ç³»çµ±æ€§èƒ½åˆ†æ

### TTS æ€§èƒ½
- **IndexTTS**: æœ€å¿«çš„åˆæˆé€Ÿåº¦ï¼Œå¹³å‡ RTF â‰ˆ 0.45ï¼Œé©åˆå³æ™‚æ‡‰ç”¨ï¼Œä½†ä¸­åœ‹å£éŸ³è¼ƒé‡
- **VibeVoice**: RTF â‰ˆ 0.82ï¼Œå¦‚æœå…‹éš†èªè€…éŸ³æª”å“è³ªä¸ä½³ï¼Œç„¡æ³•ç”Ÿæˆå¥½çš„è²éŸ³
- **Spark-TTS**: è¿‘å³æ™‚æ€§èƒ½ï¼ŒRTF â‰ˆ 1.0ï¼Œæ¥è¿‘å¯¦æ™‚åˆæˆï¼Œä¸­åœ‹å£éŸ³é‡
- **BreezyVoice**: RTF â‰ˆ 1.5-3.0ï¼Œè¼ƒä½çš„ä¸­åœ‹å£éŸ³ï¼Œä½†æœƒè·³é‡ï¼Œå°è‡´é€Ÿåº¦è©•ä¼°èµ·ä¾†å¾ˆæ…¢ (è«åç”Ÿæˆå¤ªé•·çš„èªéŸ³)

*RTF (Real Time Factor): å€¼è¶Šå°è¡¨ç¤ºåˆæˆé€Ÿåº¦è¶Šå¿«ã€‚RTF=1.0 è¡¨ç¤ºå¯¦æ™‚åˆæˆé€Ÿåº¦*

### è©³ç´°æ¸¬è©¦çµæœ

åŸºæ–¼æ¨™æº–æ¸¬è©¦ç”¨ä¾‹çš„ RTF (Real Time Factor) æ€§èƒ½æ¸¬è©¦çµæœï¼š

#### BreezyVoice æ¸¬è©¦çµæœ
| æ–‡æœ¬ | èªè€… | RTF | åˆæˆæ™‚é–“ | éŸ³é »é•·åº¦ |
|------|------|-----|----------|----------|
| çŸ­æ–‡å­— | Speaker1 | 2.230 | 22.088s | 9.903s |
| çŸ­æ–‡å­— | Speaker2 | 2.176 | 42.799s | 19.667s |
| çŸ­æ–‡å­— | Speaker3 | 3.095 | 19.582s | 6.327s |
| ä¸­ç­‰æ–‡å­— | Speaker1 | 1.569 | 22.710s | 14.478s |
| ä¸­ç­‰æ–‡å­— | Speaker2 | 1.713 | 62.698s | 36.595s |
| ä¸­ç­‰æ–‡å­— | Speaker3 | 2.859 | 23.232s | 8.127s |
| é•·æ–‡å­— | Speaker1 | 1.901 | 28.208s | 14.838s |
| é•·æ–‡å­— | Speaker2 | 1.967 | 81.422s | 41.390s |
| é•·æ–‡å­— | Speaker3 | 2.302 | 21.195s | 9.207s |

#### VibeVoice æ¸¬è©¦çµæœ
| æ–‡æœ¬ | èªè€… | RTF | åˆæˆæ™‚é–“ | éŸ³é »é•·åº¦ |
|------|------|-----|----------|----------|
| çŸ­æ–‡å­— | Speaker1 | 1.019 | 7.065s | 6.933s |
| çŸ­æ–‡å­— | Speaker2 | 0.851 | 6.124s | 7.200s |
| çŸ­æ–‡å­— | Speaker3 | 0.831 | 5.427s | 6.533s |
| ä¸­ç­‰æ–‡å­— | Speaker1 | 0.820 | 12.906s | 15.733s |
| ä¸­ç­‰æ–‡å­— | Speaker2 | 0.827 | 8.379s | 10.133s |
| ä¸­ç­‰æ–‡å­— | Speaker3 | 0.822 | 8.216s | 10.000s |
| é•·æ–‡å­— | Speaker1 | 0.819 | 10.488s | 12.800s |
| é•·æ–‡å­— | Speaker2 | 0.822 | 9.096s | 11.067s |
| é•·æ–‡å­— | Speaker3 | 0.820 | 9.951s | 12.133s |

#### IndexTTS æ¸¬è©¦çµæœ
| æ–‡æœ¬ | èªè€… | RTF | åˆæˆæ™‚é–“ | éŸ³é »é•·åº¦ |
|------|------|-----|----------|----------|
| çŸ­æ–‡å­— | Speaker1 | 0.540 | 4.079s | 7.552s |
| çŸ­æ–‡å­— | Speaker2 | 0.439 | 3.314s | 7.552s |
| çŸ­æ–‡å­— | Speaker3 | 0.483 | 3.070s | 6.357s |
| ä¸­ç­‰æ–‡å­— | Speaker1 | 0.444 | 4.541s | 10.240s |
| ä¸­ç­‰æ–‡å­— | Speaker2 | 0.426 | 4.367s | 10.240s |
| ä¸­ç­‰æ–‡å­— | Speaker3 | 0.446 | 4.358s | 9.771s |
| é•·æ–‡å­— | Speaker1 | 0.445 | 4.972s | 11.179s |
| é•·æ–‡å­— | Speaker2 | 0.444 | 4.890s | 11.008s |
| é•·æ–‡å­— | Speaker3 | 0.448 | 4.489s | 10.027s |

#### Spark-TTS æ¸¬è©¦çµæœ
| æ–‡æœ¬ | èªè€… | RTF | åˆæˆæ™‚é–“ | éŸ³é »é•·åº¦ |
|------|------|-----|----------|----------|
| çŸ­æ–‡å­— | Speaker1 | 1.160 | 9.302s | 8.020s |
| çŸ­æ–‡å­— | Speaker3 | 1.032 | 5.245s | 5.080s |
| ä¸­ç­‰æ–‡å­— | Speaker1 | 1.004 | 10.484s | 10.440s |
| ä¸­ç­‰æ–‡å­— | Speaker3 | 1.009 | 8.414s | 8.340s |
| é•·æ–‡å­— | Speaker1 | 1.000 | 10.476s | 10.480s |
| é•·æ–‡å­— | Speaker3 | 1.002 | 8.680s | 8.660s |


### ç³»çµ±æ€§èƒ½æŒ‡æ¨™
- **STT å»¶é²**: ~500-800ms
- **LLM éŸ¿æ‡‰**: ~600-900ms  
- **TTS åˆæˆ**: ~2-7s (å–æ±ºæ–¼å¼•æ“å’Œæ–‡å­—é•·åº¦)
- **ç«¯åˆ°ç«¯å»¶é²**: ~3-8s


## ğŸ“š ç›¸é—œæ–‡æª”

- [å¾Œç«¯é…ç½®æŒ‡å—](backend/CONFIG_GUIDE.md)
- [éƒ¨ç½²æ–¹å¼èªªæ˜](backend/éƒ¨ç½²æ–¹å¼.md)
- [å‰ç«¯é–‹ç™¼æ–‡æª”](frontend/README.md)
- [API æ–‡æª”](http://localhost:8000/docs) (æœå‹™é‹è¡Œæ™‚å¯è¨ªå•)


## ğŸ“œ æˆæ¬Šæ¢æ¬¾

æœ¬å°ˆæ¡ˆæ¡ç”¨ MIT æˆæ¬Šæ¢æ¬¾ - è©³è¦‹ [LICENSE](LICENSE) æª”æ¡ˆ

## ğŸ‘¥ é–‹ç™¼åœ˜éšŠ

- **ä¸»è¦é–‹ç™¼è€…**: paul.fc.tsai
- **å°ˆæ¡ˆç¶­è­·**: paul.fc.tsai